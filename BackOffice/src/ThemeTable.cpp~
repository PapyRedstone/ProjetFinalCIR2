#include "ThemeTable.hpp"
#include "Theme.hpp"

ThemeTable::ThemeTable(std::shared_ptr<Database> db, QTableWidget* t):table{t}, database{db}
{
  
}

void ThemeTable::loadTable(Theme* th){
  table->setRowCount(0);

  std::string query = "SELECT theme, id_theme, est_active FROM Theme";

  for(auto row: database->executeQuery(query)){
    table->insertRow(table->rowCount());

    auto text = new TextEditID(std::stoi(row["id_theme"]));
    QObject::connect(text, SIGNAL(textChange(TextEditID*, int)), th, SLOT(updateName(TextEditID*,int)));
  }
}
